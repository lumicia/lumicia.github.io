---
title: "算法导论笔记 Chap2 02：插入排序"
date: 2021-03-26T11:23:07+08:00
categories: ["Algorithm"]
tags: ["算法导论", "Python"]
draft: false
---

对一个序列中的数进行排序有许多种算法，首先来看插入排序。每次排序的数称为键（key）。插入排序通过对序列中的数进行交换，将键插入到相应位置。

插入排序对数组中的数进行原地（in place）排序，任何时候最多有常数个数字存储在数组外。

插入排序的伪代码 `INSERTION-SORT(A)`：

```
for j = 2 to A.length
	key = A[j]
	i = j - 1
	while i > 0 and A[i] > key
		A[i + 1] = A[i]
		i = i - 1
	A[i + 1] = key
```

与 `A[j]` 相比，变量 `key` 可以让当前要插入的元素更直观。

`while` 循环在子数组 `A[1..j-1]` 中向后寻找元素插入位置，其判断条件与 `key` 的值有关：

- `key` 是数组最小元素，那么即使遍历到第一个元素也不会有比 `key` 更小的了，所以当 `i > 0` 时（也可以写成 `i >= 1`）停止循环，在 `A[1]` 的位置插入。
- `key` 不是数组最小元素，那么肯定有元素大于 `key`，所以当 `A[i] > key` 时停止 `while` 循环，在该元素下一位置 `A[i + 1]` 插入。

书中伪代码与实际编程语言相似的地方还是很多的，但有额外需要注意的地方：伪代码中数组下标从 `1` 到 `A.length`。但是实际上现在的编程语言都采用从 `0` 到 `A.length - 1` 的下标，因此是从 `0` 到 `A.length` 左闭右开的区间。选取从 `0` 开始下标的好处是便于计算切片和区间的长度。

Python 实现：

```python
def insertion_sort(a: list):
    for j in range(1, len(a)):
         key = a[j]
         i = j - 1

         while i >= 0 and a[i] > key:
             a[i + 1] = a[i]
             i = i - 1

         a[i + 1] = key
```

循环条件做出相应调整：

- `for` 循环中 `j` 取值范围从 `1` 到 `len(a)`，左闭右开；
- `while` 循环中 `i` 应当大于等于 `0`。